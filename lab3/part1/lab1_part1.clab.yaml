name: lab3_part1
prefix: ""

topology:
  nodes:
    hub:
      kind: linux
      image: dima/ubuntu-hub:latest
      binds:
        - setup_hub.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - bash /tmp/setup.sh
        # - ip addr add dev eth1 10.2.2.21/24
        # - ip route add 10.2.0.0/16 via 10.2.2.1

    pc1:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.11/11
    
    pc2:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.12/11
    
    pc3:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.13/11

    pc4:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.13/11

    pc5:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.13/11

    pc6:
      kind: linux
      image: dima/alpine-pc:latest
      binds:
        - setup_alpine.sh:/tmp/setup.sh
        - netlab1.pub:/tmp/netlab1.pub
      exec:
        - sh /tmp/setup.sh
        - ip addr add dev eth1 172.32.1.13/11

  links:
    - endpoints: ["hub:eth1","pc1:eth1"]
    - endpoints: ["hub:eth2","pc2:eth1"]
    - endpoints: ["hub:eth3","pc3:eth1"]
    - endpoints: ["hub:eth4","pc4:eth1"]
    - endpoints: ["hub:eth5","pc5:eth1"]
    - endpoints: ["hub:eth6","pc6:eth1"]
